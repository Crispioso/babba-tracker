(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5512:function(e,t,n){e.exports=n(5758)},5758:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),s=n(5764),c=n(5760),l=n(5761),u=n(19),p=n(20),d=n(22),m=n(21),h=n(23),f=n(31),y=n(5763),g=n(115),b=n.n(g),v=n(32),E=n(10),O=n(110),S=n.n(O),j=n(134),w=function(){return a.createElement("span",{style:{display:"none"}})},C=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).dateInput=a.createRef(),n.handleChange=function(e){n.props.onChange(e)},n.openCalendar=function(){null!=n.dateInput.current&&n.dateInput.current.open()},n.closeCalendar=function(){n.setState({calendarIsOpen:!1})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.value;return a.createElement(a.Fragment,null,a.createElement(E.h,{onClick:function(){return e.openCalendar()},color:"inherit"},a.createElement(S.a,null)),a.createElement(j.a,{onChange:this.handleChange,value:t,ref:this.dateInput,TextFieldComponent:w,autoOk:!0,showTodayButton:!0}))}}]),t}(a.Component),k=n(5759),D=n(127),T=n.n(D),F=function(e){var t=e.search,n=T.a.parse(t).date,a=void 0===n?"":n;return a instanceof Array&&(a=a[0]),new Date(a)};function I(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return I=function(){return e},e}var x,N,A,B=Object(v.a)(E.l)(I()),W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleDateChange=function(e){var t=n.props.history,a=Object(k.a)(e,"yyyy-MM-dd");t.push("?date=".concat(a))},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.location,t=F(e);return a.createElement(b.a,{position:"static",color:"primary",style:{marginBottom:"1.5rem"}},a.createElement(B,null,a.createElement(E.m,{variant:"h6",color:"inherit",className:"alignRight"},"Babba tracker"),a.createElement(C,{value:t,onChange:this.handleDateChange})))}}]),t}(a.Component),L=Object(y.a)(W),P=n(29),M=n.n(P),R=n(42),z=(n(5680),n(33)),U=n(60),K=(n(224),n(5729),n(5733),U),q=(U.initializeApp({apiKey:"AIzaSyCLtPtjhDedOYHLfrOZ_yVvMWjL2hFgDO0",authDomain:"babba-68803.firebaseapp.com",databaseURL:"https://babba-68803.firebaseio.com",projectId:"babba-68803",storageBucket:"babba-68803.appspot.com",messagingSenderId:"831726193262"}),U.database(),U.firestore()),H=U.auth(),V=new function e(){var t=this;Object(u.a)(this,e),this.feeds=void 0,this.nappies=void 0,this.sleeps=void 0,this.isInitialised=void 0,this.initialise=Object(R.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isInitialised){e.next=3;break}return console.warn("Attempt to re-initialise firebase class, already done"),e.abrupt("return");case 3:return t.isInitialised=!0,e.abrupt("return",{feeds:t.feeds,nappies:t.nappies,sleeps:t.sleeps});case 5:case"end":return e.stop()}},e,this)})),this.getFeeds=function(){return Object(z.a)(t.feeds)},this.getNappies=function(){return Object(z.a)(t.nappies)},this.getSleeps=function(){return Object(z.a)(t.sleeps)},this.feeds=[],this.nappies=[],this.sleeps=[],this.isInitialised=!1};!function(e){e.Feed="feed",e.Nappy="nappy",e.Sleep="sleep"}(x||(x={})),function(e){e.Millilitres="ml",e.FluidOz="fl oz"}(N||(N={})),function(e){e.Feeds="feeds",e.Nappies="nappies",e.Sleeps="sleeps"}(A||(A={}));var _=[A.Feeds,A.Nappies,A.Sleeps],J=function(){return function(e){return function(t){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(d.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r)))).state={feeds:V.getFeeds(),nappies:V.getNappies(),sleeps:V.getSleeps()},t.firestore=q,t.unsubscriptions=[],t.getDataByDate=function(){var e=Object(R.a)(M.a.mark(function e(n){var a,r,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.startDate,r=n.endDate,i=_.map(function(e){return t.firestore.collection(e).where("time",">",a.getTime()).where("time","<",r?r.getTime():(new Date).getTime()).orderBy("time","desc").get()}),e.prev=2,e.next=5,Promise.all(i);case 5:e.sent.forEach(function(e){return e.docs.forEach(function(e){t.docAlreadyExists(e)||t.setState(function(n){return t.addDataReducer(e.id,e.data(),n)})})}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error getting data by date",e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),t.subscribeByDate=function(e){var n=e.startDate,a=e.endDate,r=[];return t.setState({feeds:[],nappies:[],sleeps:[]}),_.map(function(e){var i=t.firestore.collection(e).where("time",">",n.getTime()).where("time","<",a?a.getTime():(new Date).getTime()).orderBy("time","desc").onSnapshot(function(e){e.docChanges().forEach(function(e){return t.handleFirebaseChangeEvent(e)})},t.handleSubscribeError);r.push(i)}),t.unsubscriptions=[].concat(Object(z.a)(t.unsubscriptions),r),r},t.handleSubscribeError=function(e){console.error("Error getting snapshot from subscription",e)},t.getTimestamp=function(){return(new Date).getTime()},t.docAlreadyExists=function(e){return t.getListFromType(e.data().type).some(function(t){return t.id===e.id})},t.mapEventFeedDataToItem=function(e,t){return{id:e,type:x.Feed,amount:null!=t.amount?t.amount:"",unit:null!=t.unit?t.unit:"",note:t.note,time:null!=t.time?t.time:void 0}},t.mapEventNappyDataToItem=function(e,t){return{id:e,type:x.Nappy,isPoop:t.isPoop,isWee:t.isWee,note:t.note,time:null!=t.time?t.time:void 0}},t.mapEventSleepDataToItem=function(e,t){return{id:e,type:x.Sleep,endTime:t.endTime,note:t.note,time:null!=t.time?t.time:void 0}},t.handleAddData=function(e){void 0!=e.time&&e.time||(e.time=t.getTimestamp());try{t.firestore.collection(t.getKeyFromType(e.type)).doc(e.id).set(e)}catch(n){console.error("Error adding Firebase data",n,e)}},t.handleUpdateData=function(){var e=Object(R.a)(M.a.mark(function e(n){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log(n),t.firestore.collection(t.getKeyFromType(n.type)).doc(n.id).update(n)}catch(a){console.error("Error updating Firebase data",a,n)}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.handleRemoveData=function(e){try{t.firestore.collection(t.getKeyFromType(e.type)).doc(e.id).delete()}catch(n){console.error("Error remove Firebase data",n,e)}},t}return Object(h.a)(n,t),Object(p.a)(n,[{key:"componentDidMount",value:function(){if(!V.isInitialised)throw Error("Attempt to render component with Firebase wrapper before Firebase has been initialised")}},{key:"componentWillUnmount",value:function(){0!==this.unsubscriptions.length&&this.unsubscriptions.forEach(function(e){return e()})}},{key:"addDataReducer",value:function(e,t,n){var a=n.feeds,r=n.nappies,i=n.sleeps;if(t.type==x.Feed){var o=this.mapEventFeedDataToItem(e,t);return{feeds:[].concat(Object(z.a)(a),[o]),nappies:r,sleeps:i}}if(t.type==x.Nappy){var s=this.mapEventNappyDataToItem(e,t);return{feeds:a,nappies:[].concat(Object(z.a)(r),[s]),sleeps:i}}if(t.type==x.Sleep){var c=this.mapEventSleepDataToItem(e,t);return{feeds:a,nappies:r,sleeps:[].concat(Object(z.a)(i),[c])}}return console.error("Unrecognised doc type added to firebase:",t.type),{feeds:a,nappies:r,sleeps:i}}},{key:"updateDataReducer",value:function(e,t,n){var a=n.feeds,r=n.nappies,i=n.sleeps;if(t.type==x.Feed){var o=this.mapEventFeedDataToItem(e,t);return{feeds:a.map(function(t){return t.id!=e?t:o}),nappies:r,sleeps:i}}if(t.type==x.Nappy){var s=this.mapEventNappyDataToItem(e,t);return{feeds:a,nappies:r.map(function(t){return t.id!=e?t:s}),sleeps:i}}if(t.type==x.Sleep){var c=this.mapEventSleepDataToItem(e,t);return{feeds:a,nappies:r,sleeps:i.map(function(t){return t.id!=e?t:c})}}return console.error("Unrecognised doc type updated in firebase"),{feeds:a,nappies:r,sleeps:i}}},{key:"removeDataReducer",value:function(e,t,n){var a=n.feeds,r=n.nappies,i=n.sleeps;return t.type==x.Feed?{feeds:a.filter(function(t){return t.id!=e}),nappies:r,sleeps:i}:t.type==x.Nappy?{feeds:a,nappies:r.filter(function(t){return t.id!=e}),sleeps:i}:t.type==x.Sleep?{feeds:a,nappies:r,sleeps:i.filter(function(t){return t.id!=e})}:(console.error("Unrecognised doc type removed from firebase"),{feeds:a,nappies:r,sleeps:i})}},{key:"getKeyFromType",value:function(e){switch(e){case x.Feed:return A.Feeds;case x.Nappy:return A.Nappies;case x.Sleep:return A.Sleeps;default:return"unknown_type"}}},{key:"getListFromType",value:function(e){switch(e){case x.Feed:return this.state[A.Feeds];case x.Nappy:return this.state[A.Nappies];case x.Sleep:return this.state[A.Sleeps];default:return[]}}},{key:"handleFirebaseChangeEvent",value:function(e){var t=this;switch(e.type){case"added":if(this.docAlreadyExists(e.doc))return;this.setState(function(n){return t.addDataReducer(e.doc.id,e.doc.data(),n)});break;case"modified":this.setState(function(n){return t.updateDataReducer(e.doc.id,e.doc.data(),n)});break;case"removed":this.setState(function(n){return t.removeDataReducer(e.doc.id,e.doc.data(),n)});break;default:console.error("Unrecognised firebase document change type: ",e.type)}}},{key:"render",value:function(){var t={addEntry:this.handleAddData,updateEntry:this.handleUpdateData,removeEntry:this.handleRemoveData,subscribeByDate:this.subscribeByDate,getDataByDate:this.getDataByDate};return a.createElement(e,Object.assign({},t,this.props,this.state))}}]),n}(a.Component)}},Y=n(5762),Z=n(91),$=n.n(Z),G=n(116),Q=n.n(G),X=n(117),ee=n.n(X),te=n(118),ne=n.n(te),ae=n(119),re=n.n(ae),ie=n(37),oe=n.n(ie),se=n(121),ce=n.n(se),le=n(120),ue=n.n(le),pe=n(69),de=n.n(pe),me="iiii do LLL",he="Baby girl",fe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).renderSleepingTitle=function(e){return null==e.endTime||0===e.endTime?"".concat(he," is sleeping..."):"".concat(he," slept for ").concat(Object(Y.a)(e.time,e.endTime))},n.renderTitle=function(e){switch(e.type){case x.Feed:return"".concat(he," drank ").concat(e.amount).concat(e.unit).concat("1"===e.amount?"s":"");case x.Nappy:return"".concat(he," did a ").concat(e.isWee?"wee":"").concat(e.isWee&&e.isPoop?" and a ":"").concat(e.isPoop?"poop":"");case x.Sleep:return n.renderSleepingTitle(e);default:return"Unrecognised item \ud83e\udd14"}},n.renderEntryDate=function(e){if(null!=e.time)return a.createElement(a.Fragment,null,Object(k.a)(new Date(e.time),"HH:mm a "))},n.renderTypeIcon=function(e){return e.type===x.Feed?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83c\udf7c"):e.type===x.Sleep?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83d\ude34"):e.type===x.Nappy&&e.isPoop&&e.isWee?a.createElement("span",{style:{fontSize:"0.6rem",color:"initial"}},"\ud83d\udca9\ud83d\udca6"):e.type===x.Nappy&&e.isPoop?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83d\udca9"):e.type===x.Nappy&&e.isWee?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83d\udca6"):a.createElement(a.Fragment,null)},n.renderSortedEntries=function(){var e=n.props,t=e.nappies,r=e.feeds,i=e.sleeps,o=e.date,s=e.onChangeEntry,c=e.removeEntry,l=e.isLoading,u=[].concat(Object(z.a)(t),Object(z.a)(r),Object(z.a)(i));return l?a.createElement(a.Fragment,null,a.createElement(E.m,{style:{fontSize:"2rem",marginBottom:"3rem"},variant:"h2"},Object(k.a)(o,me)),a.createElement("div",{style:{display:"flex",marginTop:"5rem"}},a.createElement(de.a,{style:{marginRight:"auto",marginLeft:"auto"}}))):0===u.length?a.createElement(a.Fragment,null,a.createElement(E.m,{style:{fontSize:"2rem",marginBottom:"3rem"},variant:"h2"},Object(k.a)(o,me)),a.createElement(E.m,{style:{fontSize:"1.5rem"},variant:"h3"},"Nothing today")):(u.sort(function(e,t){return e.time-t.time}),a.createElement(a.Fragment,null,a.createElement(E.m,{style:{fontSize:"2rem",marginBottom:"1rem"},variant:"h2"},Object(k.a)(o,me)),a.createElement($.a,null,u.map(function(e){return a.createElement(Q.a,{key:e.id},a.createElement(ee.a,null,n.renderTypeIcon(e)),a.createElement(ne.a,{primary:n.renderTitle(e),secondary:n.renderEntryDate(e)}),a.createElement(re.a,null,a.createElement(oe.a,{onClick:function(){return s(e)},"aria-label":"Edit"},a.createElement(ue.a,null)),a.createElement(oe.a,{onClick:function(){return c(e)},"aria-label":"Delete"},a.createElement(ce.a,null))))}))))},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.renderSortedEntries()}}]),t}(a.Component),ye=n(226),ge=n(5742),be=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={unsubscriptions:[],date:new Date,isLoading:!1},n.componentWillMount=Object(R.a)(M.a.mark(function e(){var t,a,r,i,o,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.location,r=t.getDataByDate,i=t.subscribeByDate,o=F(a),s=i({startDate:Object(ye.a)(o),endDate:Object(ge.a)(o)}),n.setState({unsubscriptions:s,date:o,isLoading:!0}),e.next=6,r({startDate:Object(ye.a)(o),endDate:Object(ge.a)(o)});case 6:n.setState({isLoading:!1});case 7:case"end":return e.stop()}},e,this)})),n.componentWillReceiveProps=function(e){var t=e.location,a=F(n.props.location),r=F(t);a.getTime()!==r.getTime()&&n.handleDateChange(r)},n.handleDateChange=function(){var e=Object(R.a)(M.a.mark(function e(t){var a,r,i,o,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.unsubscriptions,r=n.props,i=r.subscribeByDate,o=r.getDataByDate,a.forEach(function(e){return e()}),s=i({startDate:Object(ye.a)(t),endDate:Object(ge.a)(t)}),n.setState({unsubscriptions:s,date:t,isLoading:!0}),e.next=7,o({startDate:Object(ye.a)(t),endDate:Object(ge.a)(t)});case 7:n.setState({isLoading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangeEntry,n=e.removeEntry,r=e.feeds,i=e.nappies,o=e.sleeps,s=this.state,c=s.date,l=s.isLoading;return a.createElement(fe,{isLoading:l,date:c,onChangeEntry:t,removeEntry:n,feeds:r,nappies:i,sleeps:o})}}]),t}(a.Component),ve=Object(y.a)(J()(be)),Ee=n(235),Oe=n(74),Se=n.n(Oe),je=n(122),we=n.n(je),Ce=n(71),ke=n.n(Ce),De=n(88),Te=n.n(De),Fe=n(89),Ie=n.n(Fe),xe=n(236),Ne=n(48),Ae=n(73),Be=n.n(Ae);function We(){var e=Object(f.a)(["\n  margin-bottom: 2rem !important;\n\n  @media (max-width: 976px) {\n    & {\n      width: 100%;\n    }\n  }\n"]);return We=function(){return e},e}var Le=Object(v.a)(E.c)(We()),Pe={amount:"",unit:N.Millilitres,note:"",time:(new Date).getTime()},Me=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Pe,n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.item,r=t.updateEntry,i=t.addEntry,o=t.onFinish,s=n.state,c=s.amount,l=s.unit,u=s.note,p=s.time;if(c)return a?void(a.type===x.Feed?(r(Object(Ne.a)({},a,{amount:c,unit:l,note:u,time:p})),o()):o()):(i({amount:c,unit:l,note:u,type:x.Feed,id:Be()(),time:p}),void o());n.setState({error:"Must add an amount"})},n.handleClear=function(){n.setState(Pe)},n.handleDateChange=function(e){n.setState({time:new Date(e.currentTarget.value).getTime()})},n.handleAmountChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({amount:t})},n.handleUnitChange=function(e){var t=e.currentTarget.value;switch(t){case N.Millilitres:n.setState({unit:N.Millilitres});break;case N.FluidOz:n.setState({unit:N.FluidOz});break;default:console.warn("Unrecognised unit type selected",t)}},n.handleNoteChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({note:t})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.item;e&&e.type==x.Feed&&this.setState(Object(Ne.a)({},e))}},{key:"render",value:function(){var e=this.state,t=e.amount,n=e.unit,r=e.note,i=e.time,o=e.error,s=new Date(i).toISOString(),c=s.substring(0,s.length-5);return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(Le,null,a.createElement(E.k,{style:{marginBottom:"1.5rem"},id:"datetime-local",label:"When",type:"datetime-local",value:c,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,required:!0}),a.createElement("div",{style:{position:"relative"}},a.createElement(E.j,{htmlFor:"feed-amount"},"Amount"),a.createElement(E.i,{style:{marginBottom:"1.5rem",width:"100%"},type:"number",value:t,id:"feed-amount",onChange:this.handleAmountChange}),null!=o&&""!=o&&a.createElement(E.f,{error:!0},o)),a.createElement(E.k,{id:"feed-unit",label:"Unit",style:{marginBottom:"1.5rem"},SelectProps:{native:!0},select:!0,value:n,onChange:this.handleUnitChange},a.createElement("option",{key:N.Millilitres,value:N.Millilitres},N.Millilitres),a.createElement("option",{key:N.FluidOz,value:N.FluidOz},N.FluidOz)),a.createElement(E.k,{id:"feed-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:r,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(E.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}}]),t}(a.Component),Re=J()(Me);function ze(){var e=Object(f.a)(["\n  margin-bottom: 2rem !important;\n\n  @media (max-width: 976px) {\n    & {\n      width: 100%;\n    }\n  }\n"]);return ze=function(){return e},e}var Ue=Object(v.a)(E.c)(ze()),Ke={isWee:!1,isPoop:!1,note:"",time:(new Date).getTime()},qe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Ke,n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.item,r=t.updateEntry,i=t.addEntry,o=t.onFinish,s=n.state,c=s.isWee,l=s.isPoop,u=s.note,p=s.time;if(c||l)return a?void(a.type===x.Nappy?(r(Object(Ne.a)({},a,{isWee:c,isPoop:l,note:u,time:p})),o()):o()):(i({isWee:c,isPoop:l,note:u,type:x.Nappy,id:Be()(),time:p}),void o());n.setState({error:"Baby must've done a wee or a poo"})},n.handleClear=function(){n.setState(Ke)},n.handleDateChange=function(e){n.setState({time:new Date(e.currentTarget.value).getTime()})},n.handleCheckboxChange=function(e,t){var a=t.currentTarget.checked;"wee"!=e?n.setState({isPoop:a}):n.setState({isWee:a})},n.handleNoteChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({note:t})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.item;e&&e.type==x.Nappy&&this.setState(Object(Ne.a)({},e))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isWee,r=t.isPoop,i=t.note,o=t.time,s=t.error,c=new Date(o).toISOString(),l=c.substring(0,c.length-5);return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(Ue,null,a.createElement(E.k,{style:{marginBottom:"1.5rem"},id:"datetime-local",label:"When",type:"datetime-local",value:l,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,required:!0}),a.createElement(E.e,{style:{marginTop:"1.5rem",marginBottom:"1.5rem"}},a.createElement(E.g,null,"Nappy contents \ud83e\udd22"),null!=s&&""!=s&&a.createElement(E.f,{error:!0},s),a.createElement(E.d,{control:a.createElement(E.b,{checked:n,onChange:function(t){return e.handleCheckboxChange("wee",t)},id:"is-wee-input",value:"wee"}),label:"Wee"}),a.createElement(E.d,{control:a.createElement(E.b,{checked:r,onChange:function(t){return e.handleCheckboxChange("poop",t)},id:"is-poop-input",value:"poop"}),label:"Poop"})),a.createElement(E.k,{id:"nappy-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:i,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(E.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}}]),t}(a.Component),He=J()(qe);function Ve(){var e=Object(f.a)(["\n  margin-bottom: 2rem !important;\n\n  @media (max-width: 976px) {\n    & {\n      width: 100%;\n    }\n  }\n"]);return Ve=function(){return e},e}var _e=Object(v.a)(E.c)(Ve()),Je={note:"",time:(new Date).getTime(),endTime:0},Ye=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Je,n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.item,r=t.updateEntry,i=t.addEntry,o=t.onFinish,s=n.state,c=s.endTime,l=s.note,u=s.time;if(!a)return i({endTime:c,note:l,type:x.Sleep,id:Be()(),time:u}),void o();a.type===x.Sleep?(r(Object(Ne.a)({},a,{endTime:c,note:l,time:u})),o()):o()},n.handleDateChange=function(e,t){if(""!==t.currentTarget.value){var a=(new Date).getTime();"endTime"!==e?n.setState({time:a}):n.setState({endTime:a})}else n.setState({endTime:0})},n.handleNoteChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({note:t})},n.convertTimeToInputString=function(e){if(null==e||0===e)return"";var t=new Date(e).toISOString();return t.substring(0,t.length-5)},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.item;e&&e.type==x.Sleep&&this.setState(Object(Ne.a)({},e))}},{key:"render",value:function(){var e=this,t=this.state,n=t.endTime,r=t.note,i=t.time;return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(_e,{style:{marginBottom:"2rem"}},a.createElement(E.k,{style:{marginBottom:"2rem"},id:"datetime",label:"Fell asleep",type:"datetime-local",value:this.convertTimeToInputString(i),InputLabelProps:{shrink:!0},onChange:function(t){return e.handleDateChange("time",t)},required:!0}),a.createElement(E.k,{style:{marginBottom:"2rem"},id:"end-datetime",label:"Woke up",type:"datetime-local",value:this.convertTimeToInputString(n),InputLabelProps:{shrink:!0},onChange:function(t){return e.handleDateChange("endTime",t)}}),a.createElement(E.k,{id:"sleep-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:r,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(E.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}}]),t}(a.Component),Ze=J()(Ye);function $e(){var e=Object(f.a)(["\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n"]);return $e=function(){return e},e}function Ge(){var e=Object(f.a)(["\n  padding: 2rem;\n"]);return Ge=function(){return e},e}var Qe=v.a.div(Ge()),Xe=v.a.div($e()),et=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedInputType:x.Feed,isEditingItem:!1},n.handleTypeChange=function(e,t){switch(Object(Ee.a)(e),t){case x.Feed:n.setState({selectedInputType:x.Feed});break;case x.Nappy:n.setState({selectedInputType:x.Nappy});break;case x.Sleep:n.setState({selectedInputType:x.Sleep});break;default:console.warn("Unrecognised update type selection",t),n.setState({selectedInputType:x.Feed})}},n.handleCloseClick=function(){n.props.onFinish()},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.item;e&&this.setState({isEditingItem:!0,selectedInputType:e.type})}},{key:"renderInput",value:function(){switch(this.state.selectedInputType){case x.Feed:return a.createElement(Re,this.props);case x.Nappy:return a.createElement(He,this.props);case x.Sleep:return a.createElement(Ze,this.props)}}},{key:"render",value:function(){var e=this.state,t=e.isEditingItem,n=e.selectedInputType;return a.createElement(Qe,null,a.createElement(Xe,null,a.createElement(E.m,{variant:"h1",style:{fontSize:"2rem",marginBottom:"2.2rem"}},t?"Edit":"Add"," an entry"),a.createElement(E.h,{style:{position:"absolute",top:"0.8rem",right:"0.8rem"},onClick:this.handleCloseClick,"aria-label":"Close"},a.createElement(xe.a,null))),a.createElement(Te.a,{style:{marginBottom:"2rem"}},a.createElement(Ie.a,null,"Type"),a.createElement(we.a,{"aria-label":"Type",name:"type",value:n,onChange:this.handleTypeChange},a.createElement(ke.a,{value:x.Feed,control:a.createElement(Se.a,null),label:"Feed",disabled:t}),a.createElement(ke.a,{value:x.Nappy,control:a.createElement(Se.a,null),label:"Nappy",disabled:t}),a.createElement(ke.a,{value:x.Sleep,control:a.createElement(Se.a,null),label:"Sleep",disabled:t}))),this.renderInput())}}]),t}(a.Component),tt=n(237),nt=n.n(tt),at=n(58),rt=n.n(at),it=n(123),ot=n.n(it),st=n(124),ct=n.n(st),lt=n(125),ut=n.n(lt);function pt(){var e=Object(f.a)(["\n  padding-right: 24px;\n  padding-left: 24px;\n\n  @media (max-width: 1280px) {\n    padding-right: 18px;\n    padding-left: 18px;\n  }\n\n  @media (max-width: 976px) {\n    padding-right: 12px;\n    padding-left: 12px;\n  }\n"]);return pt=function(){return e},e}function dt(e){return r.a.createElement(ot.a,Object.assign({direction:"up"},e))}var mt=v.a.div(pt()),ht=Object(k.a)(new Date,"yyyy-MM-dd"),ft=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isInitialisingFirebase:!1,isInputtingEntry:!1,isSignedIn:!1,entryBeingEdited:void 0},n.signInConfig={},n.unregisterAuthObserver=null,n.handleAddEntry=function(){n.setState({isInputtingEntry:!0,entryBeingEdited:void 0})},n.handleChangeEntry=function(e){n.setState({entryBeingEdited:e,isInputtingEntry:!0})},n.handleFinishAdding=function(){n.setState({isInputtingEntry:!1})},n.handleFinishEditing=function(){n.setState({isInputtingEntry:!1,entryBeingEdited:void 0})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(R.a)(M.a.mark(function e(){var t,n,a,r=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("beforeinstallprompt",function(e){console.log(e)}),t=this.props,n=t.history,a=t.location,null==T.a.parse(a.search).date&&n.replace("?date=".concat(ht)),this.signInConfig={signInFlow:"popup",signInOptions:[K.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},this.setState({isInitialisingFirebase:!0}),e.next=8,V.initialise();case 8:null==H.currentUser&&this.setState({isSignedIn:!1}),this.unregisterAuthObserver=H.onAuthStateChanged(function(e){return r.setState({isSignedIn:!!e,isInitialisingFirebase:!1})});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){null!=this.unregisterAuthObserver&&this.unregisterAuthObserver()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInitialisingFirebase,a=t.isInputtingEntry,i=t.entryBeingEdited,o=t.isSignedIn;return n?r.a.createElement("div",{style:{display:"flex",marginTop:"5rem"}},r.a.createElement(de.a,{style:{marginRight:"auto",marginLeft:"auto"}})):o?r.a.createElement(mt,null,r.a.createElement(rt.a,{fullScreen:!0,TransitionComponent:dt,open:a&&!i,onClose:function(){return e.setState({isInputtingEntry:!1})}},r.a.createElement(et,{onFinish:this.handleFinishAdding})),r.a.createElement(rt.a,{fullScreen:!0,TransitionComponent:dt,open:a&&!!i,onClose:function(){return e.setState({isInputtingEntry:!1})}},r.a.createElement(et,{onFinish:this.handleFinishEditing,item:i})),r.a.createElement(ve,{onChangeEntry:this.handleChangeEntry}),r.a.createElement(ct.a,{style:{position:"fixed",right:"1.5rem",bottom:"1.5rem"},onClick:this.handleAddEntry,color:"secondary","aria-label":"Add",classes:{}},r.a.createElement(ut.a,null))):r.a.createElement(nt.a,{uiConfig:this.signInConfig,firebaseAuth:H})}}]),t}(r.a.Component),yt=Object(y.a)(ft),gt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function bt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var vt=n(26),Et=n(5743),Ot=n.n(Et),St=n(5744),jt=n.n(St),wt=n(126),Ct=n.n(wt),kt=n(5745),Dt=Object(vt.createMuiTheme)({palette:{primary:{light:Ot.a[300],main:Ot.a[500],dark:Ot.a[700]},secondary:{light:jt.a[300],main:jt.a[500],dark:jt.a[700]}},typography:{useNextVariants:!0}}),Tt=function(){return r.a.createElement("h1",null,"Oops, this page couldn't be found")};o.a.render(r.a.createElement(l.a,{basename:"babba-tracker"},r.a.createElement(function(){return r.a.createElement(j.b,{utils:kt.a},r.a.createElement(vt.MuiThemeProvider,{theme:Dt},r.a.createElement(Ct.a,null),r.a.createElement(L,null),r.a.createElement(s.a,null,r.a.createElement(c.a,{exact:!0,path:"/"},r.a.createElement(yt,null)),r.a.createElement(c.a,{path:"*",component:Tt}))))},null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/babba-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/babba-tracker","/service-worker.js");gt?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):bt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):bt(t,e)})}}()}},[[5512,2,1]]]);
//# sourceMappingURL=main.581a901a.chunk.js.map