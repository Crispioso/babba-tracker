(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){e.exports=n(249)},249:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(16),r=n.n(s),o=n(51),l=n(74),d=n(302),c=n(20),p=n(301),m=n(251),h=n(164),u=n(144),g=n.n(u),y=n(99);const E=()=>a.createElement("span",{style:{display:"none"}});class b extends a.Component{constructor(...e){super(...e),this.dateInput=a.createRef(),this.handleChange=(e=>{this.props.onChange(e)}),this.openCalendar=(()=>{null!=this.dateInput.current&&this.dateInput.current.open()}),this.closeCalendar=(()=>{this.setState({calendarIsOpen:!1})})}render(){const e=this.props.value;return a.createElement(a.Fragment,null,a.createElement(h.a,{onClick:()=>this.openCalendar(),color:"inherit"},a.createElement(g.a,null)),a.createElement(y.a,{onChange:this.handleChange,value:e,ref:this.dateInput,TextFieldComponent:E,autoOk:!0,showTodayButton:!0}))}}var v=n(35),f=n(146),D=n.n(f);const T=e=>{const t=e.search;let n=D.a.parse(t).date;if(null!=n)return n instanceof Array&&(n=n[0]),new Date(n)},S=Object(c.a)(p.a)`
  display: flex;
  justify-content: space-between;
`;var w=Object(o.f)(class extends a.Component{constructor(...e){super(...e),this.handleDateChange=(e=>{const t=this.props.history,n=Object(v.a)(e,"yyyy-MM-dd");t.push(`?date=${n}`)})}render(){const e=this.props.location,t=T(e)||new Date;return a.createElement(d.a,{position:"static",color:"primary",style:{marginBottom:"0.5rem"}},a.createElement(S,null,a.createElement(m.a,{variant:"h6",color:"inherit",className:"alignRight"},"Babba tracker"),a.createElement(b,{value:t,onChange:this.handleDateChange})))}}),C=(n(221),n(52));n(140),n(223),n(226),n(250);const F=C,k=(C.initializeApp({apiKey:"AIzaSyCLtPtjhDedOYHLfrOZ_yVvMWjL2hFgDO0",authDomain:"babba-68803.firebaseapp.com",databaseURL:"https://babba-68803.firebaseio.com",projectId:"babba-68803",storageBucket:"babba-68803.appspot.com",messagingSenderId:"831726193262"}),C.database(),C.firestore()),I=C.auth(),O=C.messaging();var x=new class{constructor(){this.feeds=void 0,this.nappies=void 0,this.sleeps=void 0,this.isInitialised=void 0,this.initialise=(async()=>{if(!this.isInitialised)return O.onMessage(e=>{console.log("Message received. ",e)}),this.isInitialised=!0,{feeds:this.feeds,nappies:this.nappies,sleeps:this.sleeps};console.warn("Attempt to re-initialise firebase class, already done")}),this.getFeeds=(()=>[...this.feeds]),this.getNappies=(()=>[...this.nappies]),this.getSleeps=(()=>[...this.sleeps]),this.feeds=[],this.nappies=[],this.sleeps=[],this.isInitialised=!1}},j=n(300),B=n(319),W=n(156),L=n.n(W),N=n(29);let M,A;!function(e){e.Feed="feed",e.Nappy="nappy",e.Sleep="sleep"}(M||(M={})),function(e){e.Millilitres="ml",e.FluidOz="fl oz"}(A||(A={}));const P="Evelyn";let U;!function(e){e.Feeds="feeds",e.Nappies="nappies",e.Sleeps="sleeps"}(U||(U={}));const z=[U.Feeds,U.Nappies,U.Sleeps];var R=()=>e=>(class extends a.Component{constructor(...e){super(...e),this.state={feeds:x.getFeeds(),nappies:x.getNappies(),sleeps:x.getSleeps()},this.firestore=k,this.unsubscriptions=[],this.subscribeByType=(({limit:e,type:t})=>{const n=this.getKeyFromType(t),a=this.firestore.collection(n).orderBy("time","desc").limit(e||10).onSnapshot(e=>{e.docChanges().forEach(e=>this.handleFirebaseChangeEvent(e))},this.handleSubscribeError);return this.unsubscriptions=[...this.unsubscriptions,a],this.unsubscriptions}),this.getDataByDate=(async({startDate:e,endDate:t})=>{const n=z.map(n=>this.firestore.collection(n).where("time",">",e.getTime()).where("time","<",t?t.getTime():(new Date).getTime()).where("archived","==",!1).orderBy("time","desc").get());try{(await Promise.all(n)).forEach(e=>e.docs.forEach(e=>{this.docAlreadyExists(e)||this.setState(t=>this.addDataReducer(e.id,e.data(),t))}))}catch(a){console.error("Error getting data by date",a)}}),this.subscribeByDate=(({startDate:e,endDate:t})=>{const n=[];return this.setState({feeds:[],nappies:[],sleeps:[]}),z.map(a=>{const i=this.firestore.collection(a).where("time",">",e.getTime()).where("time","<",t?t.getTime():(new Date).getTime()).where("archived","==",!1).orderBy("time","desc").onSnapshot(e=>{e.docChanges().forEach(e=>this.handleFirebaseChangeEvent(e))},this.handleSubscribeError);n.push(i)}),this.unsubscriptions=[...this.unsubscriptions,...n],n}),this.handleSubscribeError=(e=>{console.error("Error getting snapshot from subscription",e)}),this.getTimestamp=(()=>(new Date).getTime()),this.docAlreadyExists=(e=>this.getListFromType(e.data().type).some(t=>t.id===e.id)),this.mapEventFeedDataToItem=((e,t)=>({id:e,type:M.Feed,amount:null!=t.amount?t.amount:"",unit:null!=t.unit?t.unit:"",note:t.note,time:null!=t.time?t.time:void 0,lastEdit:void 0!==t.lastEdit?t.lastEdit:void 0,includesGripeWater:void 0!==t.includesGripeWater&&t.includesGripeWater})),this.mapEventNappyDataToItem=((e,t)=>({id:e,type:M.Nappy,isPoop:t.isPoop,isWee:t.isWee,note:t.note,time:null!=t.time?t.time:void 0,lastEdit:void 0!==t.lastEdit?t.lastEdit:void 0})),this.mapEventSleepDataToItem=((e,t)=>({id:e,type:M.Sleep,endTime:t.endTime,note:t.note,time:null!=t.time?t.time:void 0,lastEdit:void 0!==t.lastEdit?t.lastEdit:void 0})),this.handleAddData=(e=>{void 0!=e.time&&e.time||(e.time=this.getTimestamp());const t=I.currentUser;try{this.firestore.collection(this.getKeyFromType(e.type)).doc(e.id).set(Object(N.a)({},e,{lastEdit:{email:t?t.email:"",time:(new Date).getTime()}}))}catch(n){console.error("Error adding Firebase data",n,e)}}),this.handleUpdateData=(async e=>{const t=I.currentUser;try{this.firestore.collection(this.getKeyFromType(e.type)).doc(e.id).update(Object(N.a)({},e,{lastEdit:{email:t?t.email:"",time:(new Date).getTime()}}))}catch(n){console.error("Error updating Firebase data",n,e)}}),this.handleArchiveData=(e=>{const t=I.currentUser;try{this.firestore.collection(this.getKeyFromType(e.type)).doc(e.id).update(Object(N.a)({},e,{archived:!0,lastEdit:{email:t?t.email:"",time:(new Date).getTime()}}))}catch(n){console.error("Error removing Firebase data",n,e)}}),this.handleUnarchiveData=(e=>{const t=I.currentUser;try{this.firestore.collection(this.getKeyFromType(e.type)).doc(e.id).update(Object(N.a)({},e,{archived:!1,lastEdit:{email:t?t.email:"",time:(new Date).getTime()}}))}catch(n){console.error("Error removing Firebase data",n,e)}})}componentDidMount(){if(!x.isInitialised)throw Error("Attempt to render component with Firebase wrapper before Firebase has been initialised")}componentWillUnmount(){0!==this.unsubscriptions.length&&this.unsubscriptions.forEach(e=>e())}addDataReducer(e,t,n){const a=n.feeds,i=n.nappies,s=n.sleeps;if(t.type==M.Feed){const n=this.mapEventFeedDataToItem(e,t);return{feeds:[...a,n],nappies:i,sleeps:s}}if(t.type==M.Nappy){const n=this.mapEventNappyDataToItem(e,t);return{feeds:a,nappies:[...i,n],sleeps:s}}if(t.type==M.Sleep){const n=this.mapEventSleepDataToItem(e,t);return{feeds:a,nappies:i,sleeps:[...s,n]}}return console.error("Unrecognised doc type added to firebase:",t.type),{feeds:a,nappies:i,sleeps:s}}updateDataReducer(e,t,n){const a=n.feeds,i=n.nappies,s=n.sleeps;if(t.type==M.Feed){const n=this.mapEventFeedDataToItem(e,t);return{feeds:a.map(t=>t.id!=e?t:n),nappies:i,sleeps:s}}if(t.type==M.Nappy){const n=this.mapEventNappyDataToItem(e,t);return{feeds:a,nappies:i.map(t=>t.id!=e?t:n),sleeps:s}}if(t.type==M.Sleep){const n=this.mapEventSleepDataToItem(e,t);return{feeds:a,nappies:i,sleeps:s.map(t=>t.id!=e?t:n)}}return console.error("Unrecognised doc type updated in firebase"),{feeds:a,nappies:i,sleeps:s}}removeDataReducer(e,t,n){const a=n.feeds,i=n.nappies,s=n.sleeps;return t.type==M.Feed?{feeds:a.filter(t=>t.id!=e),nappies:i,sleeps:s}:t.type==M.Nappy?{feeds:a,nappies:i.filter(t=>t.id!=e),sleeps:s}:t.type==M.Sleep?{feeds:a,nappies:i,sleeps:s.filter(t=>t.id!=e)}:(console.error("Unrecognised doc type removed from firebase"),{feeds:a,nappies:i,sleeps:s})}getKeyFromType(e){switch(e){case M.Feed:return U.Feeds;case M.Nappy:return U.Nappies;case M.Sleep:return U.Sleeps;default:return"unknown_type"}}getListFromType(e){switch(e){case M.Feed:return this.state[U.Feeds];case M.Nappy:return this.state[U.Nappies];case M.Sleep:return this.state[U.Sleeps];default:return[]}}handleFirebaseChangeEvent(e){switch(e.type){case"added":if(this.docAlreadyExists(e.doc))return;this.setState(t=>this.addDataReducer(e.doc.id,e.doc.data(),t));break;case"modified":this.setState(t=>this.updateDataReducer(e.doc.id,e.doc.data(),t));break;case"removed":this.setState(t=>this.removeDataReducer(e.doc.id,e.doc.data(),t));break;default:console.error("Unrecognised firebase document change type: ",e.type)}}render(){const t={addEntry:this.handleAddData,updateEntry:this.handleUpdateData,archiveEntry:this.handleArchiveData,unarchiveEntry:this.handleUnarchiveData,subscribeByDate:this.subscribeByDate,getDataByDate:this.getDataByDate,subscribeByType:this.subscribeByType};return a.createElement(e,Object.assign({},t,this.props,this.state))}}),$=n(315),G=n(95),K=n(321),H=n(304),q=n(303),Z=n(305),_=n(151),V=n.n(_),X=n(153),J=n.n(X),Y=n(152),Q=n.n(Y),ee=n(322);const te="iiii do LLL",ne=Object(c.a)(j.a)`
  color: #fff !important;
  background-color: rgb(220, 0, 78) !important;
  :hover {
    background-color: rgb(154, 0, 54) !important;
  }
`,ae=c.a.div`
  margin-left: 0 !important;
  margin-bottom: 1rem;
  margin-right: 16px;
`,ie=c.a.span`
  font-size: ${e=>e.isDouble?"0.5rem":"1.3rem"};
  margin-right: 24px;
  display: flex;
  align-items: center;
`;var se=class extends a.Component{constructor(...e){super(...e),this.renderDate=(e=>{const t=Object(G.convertToLocalTime)(e,{timeZone:"Europe/London"});return Object(v.a)(t,te)}),this.renderSleepingTitle=(e=>null==e.endTime||0===e.endTime?`${P} is sleeping...`:`${P} slept for ${Object($.a)(e.time,e.endTime)}`),this.renderTitle=(e=>{switch(e.type){case M.Feed:return a.createElement(a.Fragment,null,"Drank ",e.amount," ",e.unit);case M.Nappy:return`Did a ${e.isWee?"wee":""}${e.isWee&&e.isPoop?" and a ":""}${e.isPoop?"poop":""}`;case M.Sleep:return this.renderSleepingTitle(e);default:return"Unrecognised item \ud83e\udd14"}}),this.renderEntryDate=(e=>{if(null!=e.time)return a.createElement(a.Fragment,null,Object(v.a)(new Date(e.time),"h:mm a "))}),this.renderTypeIcon=(e=>e.type===M.Feed?a.createElement(ie,null,"\ud83c\udf7c"):e.type===M.Sleep?a.createElement(ie,null,"\ud83d\ude34"):e.type===M.Nappy&&e.isPoop&&e.isWee?a.createElement(ie,{isDouble:!0},"\ud83d\udca9\ud83d\udca6"):e.type===M.Nappy&&e.isPoop?a.createElement(ie,null,"\ud83d\udca9"):e.type===M.Nappy&&e.isWee?a.createElement(ie,null,"\ud83d\udca6"):a.createElement(a.Fragment,null)),this.renderLastEditDetails=(e=>{const t=e.lastEdit;if(void 0!==t)return a.createElement("p",{style:{color:"rgba(0, 0, 0, 0.54)",fontSize:"0.8rem",margin:0,padding:0}},"Last edited by ",t.email," at ",Object(v.a)(t.time,"p"))})}render(){const e=this.props,t=e.item,n=e.expanded,i=e.onClick,s=e.onEdit,r=e.onRemove;return a.createElement(K.a,{expanded:n,onChange:()=>i(t.id)},a.createElement(q.a,{expandIcon:a.createElement(V.a,null),"aria-controls":`content-${t.id}`,id:`header-${t.id}`},this.renderTypeIcon(t),a.createElement("div",null,a.createElement(m.a,{variant:"body1"},this.renderTitle(t)),a.createElement(m.a,{variant:"body2",style:{paddingTop:"2px",color:"rgba(0, 0, 0, 0.54)"}},this.renderEntryDate(t))),void 0!==t.note&&""!==t.note&&a.createElement(ee.a,{label:"note",size:"small",style:{marginLeft:"1rem"}}),t.type===M.Feed&&void 0!==t.includesGripeWater&&t.includesGripeWater&&a.createElement(ee.a,{label:"gripe water",color:"secondary",size:"small",style:{marginLeft:"1rem"}})),void 0!==t.note&&""!==t.note&&a.createElement(H.a,null,a.createElement(m.a,{variant:"body1"},t.note)),a.createElement(H.a,null,this.renderLastEditDetails(t)),a.createElement(Z.a,null,a.createElement(ae,null,a.createElement(j.a,{variant:"contained",color:"default",onClick:s},"Edit",a.createElement(Q.a,{style:{marginLeft:"1rem"}}))),a.createElement(ae,null,a.createElement(ne,{variant:"contained",color:"default",onClick:r},"Delete",a.createElement(J.a,{style:{marginLeft:"1rem"}})))))}},re=n(306);const oe="iiii do LLL";var le=class extends a.Component{constructor(...e){super(...e),this.state={isShowingUndoDelete:!1,expandedEntryKey:void 0},this.handleEntryClick=(e=>{this.state.expandedEntryKey!==e?this.setState({expandedEntryKey:e}):this.setState({expandedEntryKey:void 0})}),this.renderDate=(e=>{const t=Object(G.convertToLocalTime)(e,{timeZone:"Europe/London"});return Object(v.a)(t,oe)})}render(){const e=this.props,t=e.nappies,n=e.feeds,i=e.sleeps,s=e.date,r=e.onChangeEntry,o=e.removeEntry,l=e.isLoading,d=[...t,...n,...i],c=this.state.expandedEntryKey;return l?a.createElement(a.Fragment,null,a.createElement(m.a,{style:{fontSize:"1rem",paddingTop:"1.5rem",paddingBottom:"3rem",fontWeight:500,color:"rgba(0, 0, 0, 0.54)"},variant:"h2"},this.renderDate(s)),a.createElement("div",{style:{display:"flex",marginTop:"5rem"}},a.createElement(re.a,{style:{marginRight:"auto",marginLeft:"auto"}}))):0===d.length?a.createElement(a.Fragment,null,a.createElement(m.a,{style:{fontSize:"1rem",paddingTop:"1.5rem",paddingBottom:"3rem",fontWeight:500,color:"rgba(0, 0, 0, 0.54)"},variant:"h2"},this.renderDate(s)),a.createElement(m.a,{style:{fontSize:"1.5rem"},variant:"h3"},"Nothing today")):(d.sort((e,t)=>e.time-t.time),a.createElement(a.Fragment,null,a.createElement(m.a,{style:{fontSize:"1rem",paddingTop:"1.5rem",paddingBottom:"1rem",fontWeight:500,position:"sticky",top:"0",zIndex:1,color:"rgba(0, 0, 0, 0.54)",backgroundColor:"#f5f5f5"},variant:"h2"},this.renderDate(s)),a.createElement("div",{style:{marginBottom:"104px"}},d.map(e=>a.createElement(se,{key:e.id,expanded:void 0!==c&&c===e.id,item:e,onClick:this.handleEntryClick,onEdit:()=>r(e),onRemove:()=>o(e)})))))}},de=n(69),ce=n(126),pe=n(155),me=n.n(pe),he=n(154),ue=n.n(he),ge=n(307),ye=n(308);const Ee=c.a.div`
  background-color: #fff;
  padding: 1rem 0rem;
  margin: 1rem;
  color: rgba(0, 0, 0, 0.87);
  display: flex;
  align-items: center;
`,be=4;var ve=R()(class extends a.Component{constructor(...e){super(...e),this.interval=0,this.state={time:(new Date).getTime()},this.intervalTick=(()=>{this.setState({time:(new Date).getTime()})}),this.getTimeOfLatestFeed=(()=>{const e=this.props.feeds;if(1===e.length)return e[0].time;const t=e.sort((e,t)=>e.time-t.time)[e.length-1];return null==t?0:t.time})}componentDidMount(){(0,this.props.subscribeByType)({limit:1,type:M.Feed}),this.interval=setInterval(this.intervalTick,3e4)}componentWillUnmount(){clearInterval(this.interval)}renderText(e){const t=Object(ge.a)(new Date,e),n=Object(ye.a)(new Date,e),i=t-60*n;return 0===t?a.createElement(a.Fragment,null,"Evelyn just ate"):a.createElement(a.Fragment,null,"Last ate"," ",a.createElement("b",null,0!==n&&`${n} hour${n>1?"s":""} `,i," minute",i>1?"s":""," ago"))}render(){const e=this.state.time,t=this.getTimeOfLatestFeed(),n=Object(ye.a)(t,(new Date).getTime())<=-be;return 0===t?null:a.createElement(Ee,{key:e},n?a.createElement(ue.a,{color:"error",fontSize:"large"}):a.createElement(me.a,{color:"secondary",fontSize:"large"}),a.createElement(m.a,{variant:"body1",component:"p",style:{marginLeft:"1rem"}},this.renderText(t)))}}),fe=n(165);var De=Object(o.f)(R()(class extends a.Component{constructor(...e){super(...e),this.state={unsubscriptions:[],date:new Date,isLoading:!1,isShowingDeleteConfirmation:!1,reversableDelete:void 0},this.componentWillMount=(async()=>{const e=this.props,t=e.location,n=e.getDataByDate,a=e.subscribeByDate,i=T(t)||new Date,s=a({startDate:Object(de.a)(i),endDate:Object(ce.a)(i)});this.setState({unsubscriptions:s,date:i,isLoading:!0}),await n({startDate:Object(de.a)(i),endDate:Object(ce.a)(i)}),this.setState({isLoading:!1})}),this.componentWillReceiveProps=(e=>{const t=e.location,n=T(this.props.location)||new Date,a=T(t)||new Date;n.getTime()!==a.getTime()&&this.handleDateChange(a)}),this.handleDateChange=(async e=>{const t=this.state.unsubscriptions,n=this.props,a=n.subscribeByDate,i=n.getDataByDate;t.forEach(e=>e());const s=a({startDate:Object(de.a)(e),endDate:Object(ce.a)(e)});this.setState({unsubscriptions:s,date:e,isLoading:!0}),await i({startDate:Object(de.a)(e),endDate:Object(ce.a)(e)}),this.setState({isLoading:!1})}),this.undoDelete=(e=>{this.closeDeleteConfirmation(),void 0!==e&&this.props.unarchiveEntry(e)}),this.handleRemove=(e=>{this.showDeleteConfirmation(e),this.props.archiveEntry(e)}),this.showDeleteConfirmation=(e=>this.setState({reversableDelete:e})),this.closeDeleteConfirmation=(()=>this.setState({reversableDelete:void 0}))}render(){const e=this.props,t=e.onChangeEntry,n=e.feeds,i=e.nappies,s=e.sleeps,r=this.state,o=r.date,l=r.isLoading,d=r.reversableDelete;return a.createElement(a.Fragment,null,a.createElement(fe.a,{square:!0},a.createElement(ve,null)),a.createElement(le,{isLoading:l,date:o,onChangeEntry:t,removeEntry:this.handleRemove,feeds:n,nappies:i,sleeps:s}),a.createElement(B.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==d,autoHideDuration:6e3,onClose:this.closeDeleteConfirmation,ContentProps:{"aria-describedby":"message-id"},message:a.createElement("span",{id:"message-id"},"Note archived"),action:[a.createElement(j.a,{key:"undo",color:"inherit",size:"small",onClick:()=>this.undoDelete(d)},"UNDO"),a.createElement(h.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.closeDeleteConfirmation},a.createElement(L.a,null))]}))}})),Te=n(317),Se=n(310),we=n(309),Ce=n(296),Fe=n(252),ke=n(323),Ie=n(64),Oe=n.n(Ie),xe=n(314),je=n(297),Be=n(295),We=n(299),Le=n(316);const Ne=Object(c.a)(Ce.a)`
  margin-bottom: 2rem !important;

  @media (max-width: 976px) {
    & {
      width: 100%;
    }
  }
`,Me={amount:"",unit:A.FluidOz,note:"",time:void 0,includesGripeWater:!1};var Ae=R()(class extends a.Component{constructor(...e){super(...e),this.state=Me,this.handleSubmit=(e=>{e.preventDefault();const t=this.props,n=t.item,a=t.updateEntry,i=t.addEntry,s=t.onFinish,r=this.state,o=r.amount,l=r.unit,d=r.note,c=r.time,p=r.includesGripeWater;if(o)return n?void(n.type===M.Feed?(a(Object(N.a)({},n,{amount:o,unit:l,note:d,time:c||(new Date).getTime(),includesGripeWater:p})),s()):s()):(i({amount:o,unit:l,note:d,type:M.Feed,id:Oe()(),time:c||(new Date).getTime(),archived:!1,includesGripeWater:p}),void s());this.setState({error:"Must add an amount"})}),this.handleClear=(()=>{this.setState(Me)}),this.handleDateChange=(e=>{this.setState({time:new Date(e.currentTarget.value).getTime()})}),this.handleAmountChange=(e=>{const t=e.currentTarget.value;null!=t&&this.setState({amount:t})}),this.handleUnitChange=(e=>{let t=e.currentTarget.value;switch(t){case A.Millilitres:this.setState({unit:A.Millilitres});break;case A.FluidOz:this.setState({unit:A.FluidOz});break;default:console.warn("Unrecognised unit type selected",t)}}),this.handleNoteChange=(e=>{const t=e.currentTarget.value;null!=t&&this.setState({note:t})}),this.handleGripeWaterChange=(e=>{const t=e.currentTarget.checked;this.setState({includesGripeWater:t})})}componentWillMount(){const e=this.props.item;e&&e.type==M.Feed&&this.setState(Object(N.a)({},e))}render(){const e=this.state,t=e.amount,n=e.unit,i=e.note,s=e.time,r=e.error,o=e.includesGripeWater,l=s||(new Date).getTime(),d=`${Object(v.a)(l,"yyyy-MM-dd")}T${Object(v.a)(l,"HH:mm")}:00`;return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(Ne,null,a.createElement(xe.a,{style:{marginBottom:"1.5rem"},id:"datetime-local",label:"When",type:"datetime-local",value:d,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,required:!0}),a.createElement("div",{style:{position:"relative"}},a.createElement(je.a,{htmlFor:"feed-amount"},"Amount"),a.createElement(Be.a,{style:{marginBottom:"1.5rem",width:"100%"},type:"number",value:t,id:"feed-amount",onChange:this.handleAmountChange}),null!=r&&""!=r&&a.createElement(We.a,{error:!0},r)),a.createElement(xe.a,{id:"feed-unit",label:"Unit",style:{marginBottom:"1.5rem"},SelectProps:{native:!0},select:!0,value:n,onChange:this.handleUnitChange},a.createElement("option",{key:A.FluidOz,value:A.FluidOz},A.FluidOz),a.createElement("option",{key:A.Millilitres,value:A.Millilitres},A.Millilitres)),a.createElement(xe.a,{id:"feed-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:i,onChange:this.handleNoteChange}),a.createElement(we.a,{control:a.createElement(Le.a,{checked:o,onChange:this.handleGripeWaterChange,id:"includes-gripe-water-input",value:o}),label:"Includes gripe water"})),a.createElement("div",null,a.createElement(j.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}}),Pe=n(254);const Ue=Object(c.a)(Ce.a)`
  margin-bottom: 2rem !important;

  @media (max-width: 976px) {
    & {
      width: 100%;
    }
  }
`,ze={isWee:!1,isPoop:!1,note:"",time:void 0};var Re=R()(class extends a.Component{constructor(...e){super(...e),this.state=ze,this.handleSubmit=(e=>{e.preventDefault();const t=this.props,n=t.item,a=t.updateEntry,i=t.addEntry,s=t.onFinish,r=this.state,o=r.isWee,l=r.isPoop,d=r.note,c=r.time;if(o||l)return n?void(n.type===M.Nappy?(a(Object(N.a)({},n,{isWee:o,isPoop:l,note:d,time:c||(new Date).getTime()})),s()):s()):(i({isWee:o,isPoop:l,note:d,type:M.Nappy,id:Oe()(),time:c||(new Date).getTime(),archived:!1}),void s());this.setState({error:"Baby must've done a wee or a poo"})}),this.handleClear=(()=>{this.setState(ze)}),this.handleDateChange=(e=>{this.setState({time:new Date(e.currentTarget.value).getTime()})}),this.handleCheckboxChange=((e,t)=>{const n=t.currentTarget.checked;"wee"!=e?this.setState({isPoop:n}):this.setState({isWee:n})}),this.handleNoteChange=(e=>{const t=e.currentTarget.value;null!=t&&this.setState({note:t})})}componentDidMount(){const e=this.props.item;e&&e.type==M.Nappy&&this.setState(Object(N.a)({},e))}render(){const e=this.state,t=e.isWee,n=e.isPoop,i=e.note,s=e.time,r=e.error,o=s||(new Date).getTime(),l=`${Object(v.a)(o,"yyyy-MM-dd")}T${Object(v.a)(o,"HH:mm")}:00`;return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(Ue,null,a.createElement(xe.a,{style:{marginBottom:"1.5rem"},id:"datetime-local",label:"When",type:"datetime-local",value:l,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,required:!0}),a.createElement(Pe.a,{style:{marginTop:"1.5rem",marginBottom:"1.5rem"}},a.createElement(Fe.a,null,"Nappy contents \ud83e\udd22"),null!=r&&""!=r&&a.createElement(We.a,{error:!0},r),a.createElement(we.a,{control:a.createElement(Le.a,{checked:t,onChange:e=>this.handleCheckboxChange("wee",e),id:"is-wee-input",value:"wee"}),label:"Wee"}),a.createElement(we.a,{control:a.createElement(Le.a,{checked:n,onChange:e=>this.handleCheckboxChange("poop",e),id:"is-poop-input",value:"poop"}),label:"Poop"})),a.createElement(xe.a,{id:"nappy-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:i,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(j.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}});const $e=Object(c.a)(Ce.a)`
  margin-bottom: 2rem !important;

  @media (max-width: 976px) {
    & {
      width: 100%;
    }
  }
`,Ge={note:"",time:void 0,endTime:0};var Ke=R()(class extends a.Component{constructor(...e){super(...e),this.state=Ge,this.handleSubmit=(e=>{e.preventDefault();const t=this.props,n=t.item,a=t.updateEntry,i=t.addEntry,s=t.onFinish,r=this.state,o=r.endTime,l=r.note,d=r.time;if(!n)return i({endTime:o,note:l,type:M.Sleep,id:Oe()(),time:d||(new Date).getTime(),archived:!1}),void s();n.type===M.Sleep?(a(Object(N.a)({},n,{endTime:o,note:l,time:d||(new Date).getTime()})),s()):s()}),this.handleDateChange=((e,t)=>{const n=t.currentTarget.value;if(""===n)return void this.setState({endTime:0});const a=new Date(n).getTime();"endTime"!==e?this.setState({time:a}):this.setState({endTime:a})}),this.handleNoteChange=(e=>{const t=e.currentTarget.value;null!=t&&this.setState({note:t})}),this.convertTimeToInputString=(e=>void 0===e?"":0===e?"":`${Object(v.a)(e,"yyyy-MM-dd")}T${Object(v.a)(e,"HH:mm")}:00`)}componentDidMount(){const e=this.props.item;e&&e.type==M.Sleep&&this.setState(Object(N.a)({},e))}render(){const e=this.state,t=e.endTime,n=e.note,i=e.time;return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement($e,{style:{marginBottom:"2rem"}},a.createElement(xe.a,{style:{marginBottom:"2rem"},id:"datetime",label:"Fell asleep",type:"datetime-local",value:this.convertTimeToInputString(i),InputLabelProps:{shrink:!0},onChange:e=>this.handleDateChange("time",e),required:!0}),a.createElement(xe.a,{style:{marginBottom:"2rem"},id:"end-datetime",label:"Woke up",type:"datetime-local",value:this.convertTimeToInputString(t),InputLabelProps:{shrink:!0},onChange:e=>this.handleDateChange("endTime",e)}),a.createElement(xe.a,{id:"sleep-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:n,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(j.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}});const He=c.a.div`
  padding: 2rem;
`,qe=c.a.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;var Ze=class extends a.Component{constructor(...e){super(...e),this.state={selectedInputType:M.Feed,isEditingItem:!1},this.handleTypeChange=(({},e)=>{switch(e){case M.Feed:this.setState({selectedInputType:M.Feed});break;case M.Nappy:this.setState({selectedInputType:M.Nappy});break;case M.Sleep:this.setState({selectedInputType:M.Sleep});break;default:console.warn("Unrecognised update type selection",e),this.setState({selectedInputType:M.Feed})}}),this.handleCloseClick=(()=>{this.props.onFinish()}),this.renderLastEditDetails=(()=>{const e=this.props.item;if(void 0===e)return;const t=e.lastEdit;return void 0!==t?a.createElement(m.a,{variant:"subtitle1",color:"textSecondary"},"Last edited by ",t.email," (",Object(v.a)(t.time,"p"),")"):void 0})}componentDidMount(){const e=this.props.item;e&&this.setState({isEditingItem:!0,selectedInputType:e.type})}renderInput(){switch(this.state.selectedInputType){case M.Feed:return a.createElement(Ae,this.props);case M.Nappy:return a.createElement(Re,this.props);case M.Sleep:return a.createElement(Ke,this.props)}}render(){const e=this.state,t=e.isEditingItem,n=e.selectedInputType;return a.createElement(He,null,a.createElement("div",{style:{marginBottom:"2.2rem"}},a.createElement(qe,null,a.createElement(m.a,{variant:"h1",style:{fontSize:"2rem",marginBottom:"0.5rem"},display:"block"},t?"Edit":"Add"," an entry"),a.createElement(h.a,{style:{position:"absolute",top:"0.8rem",right:"0.8rem"},onClick:this.handleCloseClick,"aria-label":"Close"},a.createElement(ke.a,null)))),!t&&a.createElement(Ce.a,{style:{marginBottom:"2rem"}},a.createElement(Fe.a,null,"Type"),a.createElement(Se.a,{"aria-label":"Type",name:"type",value:n,onChange:this.handleTypeChange},a.createElement(we.a,{value:M.Feed,control:a.createElement(Te.a,null),label:"Feed",disabled:t}),a.createElement(we.a,{value:M.Nappy,control:a.createElement(Te.a,null),label:"Nappy",disabled:t}),a.createElement(we.a,{value:M.Sleep,control:a.createElement(Te.a,null),label:"Sleep",disabled:t}))),this.renderInput())}},_e=n(157),Ve=n.n(_e),Xe=n(318),Je=n(311),Ye=n(312),Qe=n(159),et=n.n(Qe),tt=n(158);function nt(e){return i.a.createElement(Je.a,Object.assign({direction:"up"},e))}const at=c.a.div`
  padding-right: 24px;
  padding-left: 24px;

  @media (max-width: 1280px) {
    padding-right: 18px;
    padding-left: 18px;
  }

  @media (max-width: 976px) {
    padding-right: 12px;
    padding-left: 12px;
  }
`;var it=Object(o.f)(class extends i.a.Component{constructor(...e){super(...e),this.state={isInitialisingFirebase:!1,isInputtingEntry:!1,isSignedIn:!1,entryBeingEdited:void 0},this.signInConfig={},this.unregisterAuthObserver=null,this.componentDidMount=(()=>{O.usePublicVapidKey("BOkyItM60bXMsTT3mm1m1_5zv0L3RXvPC98aw52WXHnv6hLHIhcRXFffuEulEZmDqj_mFhTeZ1Bzu72v0UOVAH8")}),this.handleAddEntry=(()=>{this.setState({isInputtingEntry:!0,entryBeingEdited:void 0})}),this.handleChangeEntry=(e=>{this.setState({entryBeingEdited:e,isInputtingEntry:!0})}),this.handleFinishAdding=(()=>{this.setState({isInputtingEntry:!1})}),this.handleFinishEditing=(()=>{this.setState({isInputtingEntry:!1,entryBeingEdited:void 0})})}async componentWillMount(){window.addEventListener("beforeinstallprompt",e=>{console.log(e)});const e=this.props,t=e.history,n=e.location,a=T(n);void 0!==a&&Object(tt.a)(a,new Date)&&t.replace("/"),this.signInConfig={signInFlow:"popup",signInOptions:[F.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:()=>!1}},this.setState({isInitialisingFirebase:!0}),await x.initialise(),null==I.currentUser&&this.setState({isSignedIn:!1}),this.unregisterAuthObserver=I.onAuthStateChanged(e=>this.setState({isSignedIn:!!e,isInitialisingFirebase:!1}))}componentWillReceiveProps(e){const t=e.history,n=e.location,a=T(n);void 0!==a&&Object(tt.a)(a,new Date)&&t.replace("/")}componentWillUnmount(){null!=this.unregisterAuthObserver&&this.unregisterAuthObserver()}render(){const e=this.state,t=e.isInitialisingFirebase,n=e.isInputtingEntry,a=e.entryBeingEdited,s=e.isSignedIn;return t?i.a.createElement("div",{style:{display:"flex",marginTop:"5rem"}},i.a.createElement(re.a,{style:{marginRight:"auto",marginLeft:"auto"}})):s?i.a.createElement(at,null,i.a.createElement(Xe.a,{fullScreen:!0,TransitionComponent:nt,open:n&&!a,onClose:()=>this.setState({isInputtingEntry:!1})},i.a.createElement(Ze,{onFinish:this.handleFinishAdding})),i.a.createElement(Xe.a,{fullScreen:!0,TransitionComponent:nt,open:n&&!!a,onClose:()=>this.setState({isInputtingEntry:!1})},i.a.createElement(Ze,{onFinish:this.handleFinishEditing,item:a})),i.a.createElement(De,{onChangeEntry:this.handleChangeEntry}),i.a.createElement(Ye.a,{style:{position:"fixed",right:"1.5rem",bottom:"1.5rem"},onClick:this.handleAddEntry,color:"secondary","aria-label":"Add",classes:{}},i.a.createElement(et.a,null))):i.a.createElement(Ve.a,{uiConfig:this.signInConfig,firebaseAuth:I})}});const st=async()=>{try{await O.requestPermission();const t=await O.getToken();return console.log("Push notification token:",t),t}catch(e){console.error("Error requesting permission for push notifications",e)}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rt(e,t){navigator.serviceWorker.register(e).then(e=>{O.useServiceWorker(e),st(),O.getToken().then(e=>{console.log(e)}),O.setBackgroundMessageHandler(e=>{console.log("[firebase-messaging-sw.js] Received background message ",e);return window.self.registration.showNotification("Background Message Title",{body:"Background Message body.",icon:"https://crispioso.github.io/babba-tracker/babba-512.png"})}),e.onupdatefound=(()=>{const n=e.installing;null!=n&&(n.onstatechange=(()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})}var ot=n(161),lt=n(313),dt=n(105),ct=n.n(dt),pt=n(106),mt=n.n(pt),ht=n(320),ut=n(160);const gt=Object(ot.a)({palette:{primary:{light:ct.a[300],main:ct.a[500],dark:ct.a[700]},secondary:{light:mt.a[300],main:mt.a[500],dark:mt.a[700]},background:{default:"#f5f5f5"}}}),yt=()=>i.a.createElement("h1",null,"Oops, this page couldn't be found");r.a.render(i.a.createElement(l.a,{basename:"babba-tracker"},i.a.createElement(()=>i.a.createElement(y.b,{utils:ut.a},i.a.createElement(lt.a,{theme:gt},i.a.createElement(ht.a,null),i.a.createElement(w,null),i.a.createElement(o.c,null,i.a.createElement(o.a,{exact:!0,path:"/"},i.a.createElement(it,null)),i.a.createElement(o.a,{path:"*",component:yt})))),null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/babba-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{rt("/babba-tracker/service-worker.js",e)})}}()}},[[176,1,2]]]);
//# sourceMappingURL=main.a71f3bae.chunk.js.map