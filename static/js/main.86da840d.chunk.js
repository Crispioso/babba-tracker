(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5510:function(e,t,n){e.exports=n(5756)},5756:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),o=n.n(i),c=n(5761),s=n(5758),l=n(5759),u=n(19),d=n(23),p=n(25),m=n(24),h=n(26),f=n(34),y=n(5760),g=n(112),b=n.n(g),v=n(36),E=n(13),O=n(107),w=n.n(O),j=n(132),C=function(){return a.createElement("span",{style:{display:"none"}})},k=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).dateInput=a.createRef(),n.handleChange=function(e){n.props.onChange(e)},n.openCalendar=function(){null!=n.dateInput.current&&n.dateInput.current.open()},n.closeCalendar=function(){n.setState({calendarIsOpen:!1})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.value;return a.createElement(a.Fragment,null,a.createElement(E.h,{onClick:function(){return e.openCalendar()},color:"inherit"},a.createElement(w.a,null)),a.createElement(j.a,{onChange:this.handleChange,value:t,ref:this.dateInput,TextFieldComponent:C,autoOk:!0,showTodayButton:!0}))}}]),t}(a.Component),D=n(5757),S=n(124),F=n.n(S),I=function(e){var t=e.search,n=F.a.parse(t).date,a=void 0===n?"":n;return a instanceof Array&&(a=a[0]),new Date(a)};function T(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return T=function(){return e},e}var x,A,N,B=Object(v.a)(E.l)(T()),W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleDateChange=function(e){var t=n.props.history,a=Object(D.a)(e,"yyyy-MM-dd");t.push("?date=".concat(a))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.location,t=I(e);return a.createElement(b.a,{position:"static",color:"primary",style:{marginBottom:"1.5rem"}},a.createElement(B,null,a.createElement(E.m,{variant:"h6",color:"inherit",className:"alignRight"},"Babba tracker"),a.createElement(k,{value:t,onChange:this.handleDateChange})))}}]),t}(a.Component),L=Object(y.a)(W),P=n(29),M=n.n(P),R=n(41),U=(n(5678),n(42)),z=n(58),K=(n(222),n(5727),n(5731),z),H=(z.initializeApp({apiKey:"AIzaSyCLtPtjhDedOYHLfrOZ_yVvMWjL2hFgDO0",authDomain:"babba-68803.firebaseapp.com",databaseURL:"https://babba-68803.firebaseio.com",projectId:"babba-68803",storageBucket:"babba-68803.appspot.com",messagingSenderId:"831726193262"}),z.database(),z.firestore()),V=z.auth(),_=new function e(){var t=this;Object(u.a)(this,e),this.feeds=void 0,this.nappies=void 0,this.isInitialised=void 0,this.initialise=Object(R.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isInitialised){e.next=3;break}return console.warn("Attempt to re-initialise firebase class, already done"),e.abrupt("return");case 3:return t.isInitialised=!0,e.abrupt("return",{feeds:t.feeds,nappies:t.nappies});case 5:case"end":return e.stop()}},e,this)})),this.getFeeds=function(){return Object(U.a)(t.feeds)},this.getNappies=function(){return Object(U.a)(t.nappies)},this.feeds=[],this.nappies=[],this.isInitialised=!1};!function(e){e.Feed="feed",e.Nappy="nappy"}(x||(x={})),function(e){e.Millilitres="ml",e.FluidOz="fl oz"}(A||(A={})),function(e){e.Feeds="feeds",e.Nappies="nappies"}(N||(N={}));var q=[N.Feeds,N.Nappies],J=function(){return function(e){return function(t){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(p.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r)))).state={feeds:_.getFeeds(),nappies:_.getNappies()},t.firestore=H,t.unsubscriptions=[],t.getDataByDate=function(){var e=Object(R.a)(M.a.mark(function e(n){var a,r,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.startDate,r=n.endDate,i=q.map(function(e){return t.firestore.collection(e).where("time",">",a.getTime()).where("time","<",r?r.getTime():(new Date).getTime()).orderBy("time","desc").get()}),e.prev=3,e.next=6,Promise.all(i);case 6:e.sent.forEach(function(e){return e.docs.forEach(function(e){t.docAlreadyExists(e)||t.setState(function(n){return t.addDataReducer(e.id,e.data(),n)})})}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error getting data by date",e.t0);case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t){return e.apply(this,arguments)}}(),t.subscribeByDate=function(e){var n=e.startDate,a=e.endDate,r=[];return t.setState({feeds:[],nappies:[]}),q.map(function(e){var i=t.firestore.collection(e).where("time",">",n.getTime()).where("time","<",a?a.getTime():(new Date).getTime()).orderBy("time","desc").onSnapshot(function(e){e.docChanges().forEach(function(e){return t.handleFirebaseChangeEvent(e)})},t.handleSubscribeError);r.push(i)}),t.unsubscriptions=[].concat(Object(U.a)(t.unsubscriptions),r),r},t.handleSubscribeError=function(e){console.error("Error getting snapshot from subscription",e)},t.getTimestamp=function(){return(new Date).getTime()},t.docAlreadyExists=function(e){return t.getListFromType(e.data().type).some(function(t){return t.id===e.id})},t.mapEventFeedDataToItem=function(e,t){return{id:e,type:x.Feed,amount:null!=t.amount?t.amount:"",unit:null!=t.unit?t.unit:"",note:t.note,time:null!=t.time?t.time:void 0}},t.mapEventNappyDataToItem=function(e,t){return{id:e,type:x.Nappy,isPoop:t.isPoop,isWee:t.isWee,note:t.note,time:null!=t.time?t.time:void 0}},t.handleAddData=function(e){void 0!=e.time&&e.time||(e.time=t.getTimestamp());try{t.firestore.collection(t.getKeyFromType(e.type)).doc(e.id).set(e)}catch(n){console.error("Error adding Firebase data",n,e)}},t.handleUpdateData=function(){var e=Object(R.a)(M.a.mark(function e(n){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t.firestore.collection(t.getKeyFromType(n.type)).doc(n.id).update(n)}catch(a){console.error("Error updating Firebase data",a,n)}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.handleRemoveData=function(e){try{t.firestore.collection(t.getKeyFromType(e.type)).doc(e.id).delete()}catch(n){console.error("Error remove Firebase data",n,e)}},t}return Object(h.a)(n,t),Object(d.a)(n,[{key:"componentDidMount",value:function(){if(!_.isInitialised)throw Error("Attempt to render component with Firebase wrapper before Firebase has been initialised")}},{key:"componentWillUnmount",value:function(){0!==this.unsubscriptions.length&&this.unsubscriptions.forEach(function(e){return e()})}},{key:"addDataReducer",value:function(e,t,n){var a=n.feeds,r=n.nappies;if(t.type==x.Feed){var i=this.mapEventFeedDataToItem(e,t);return{feeds:[].concat(Object(U.a)(a),[i]),nappies:r}}if(t.type==x.Nappy){var o=this.mapEventNappyDataToItem(e,t);return{feeds:a,nappies:[].concat(Object(U.a)(r),[o])}}return console.error("Unrecognised doc type added to firebase:",t.type),{feeds:a,nappies:r}}},{key:"updateDataReducer",value:function(e,t,n){var a=n.feeds,r=n.nappies;if(t.type==x.Feed){var i=this.mapEventFeedDataToItem(e,t);return{feeds:a.map(function(t){return t.id!=e?t:i}),nappies:r}}if(t.type==x.Nappy){var o=this.mapEventNappyDataToItem(e,t);return{feeds:a,nappies:r.map(function(t){return t.id!=e?t:o})}}return console.error("Unrecognised doc type updated in firebase"),{feeds:a,nappies:r}}},{key:"removeDataReducer",value:function(e,t,n){var a=n.feeds,r=n.nappies;return t.type==x.Feed?{feeds:a.filter(function(t){return t.id!=e}),nappies:r}:t.type==x.Nappy?{feeds:a,nappies:r.filter(function(t){return t.id!=e})}:(console.error("Unrecognised doc type removed from firebase"),{feeds:a,nappies:r})}},{key:"getKeyFromType",value:function(e){switch(e){case x.Feed:return N.Feeds;case x.Nappy:return N.Nappies;default:return"unknown_type"}}},{key:"getListFromType",value:function(e){switch(e){case x.Feed:return this.state[N.Feeds];case x.Nappy:return this.state[N.Nappies];default:return[]}}},{key:"handleFirebaseChangeEvent",value:function(e){var t=this;switch(e.type){case"added":if(this.docAlreadyExists(e.doc))return;this.setState(function(n){return t.addDataReducer(e.doc.id,e.doc.data(),n)});break;case"modified":this.setState(function(n){return t.updateDataReducer(e.doc.id,e.doc.data(),n)});break;case"removed":this.setState(function(n){return t.removeDataReducer(e.doc.id,e.doc.data(),n)});break;default:console.error("Unrecognised firebase document change type: ",e.type)}}},{key:"render",value:function(){var t={addEntry:this.handleAddData,updateEntry:this.handleUpdateData,removeEntry:this.handleRemoveData,subscribeByDate:this.subscribeByDate,getDataByDate:this.getDataByDate};return a.createElement(e,Object.assign({},t,this.props,this.state))}}]),n}(a.Component)}},Y=n(86),Z=n.n(Y),$=n(113),G=n.n($),Q=n(114),X=n.n(Q),ee=n(115),te=n.n(ee),ne=n(116),ae=n.n(ne),re=n(35),ie=n.n(re),oe=n(118),ce=n.n(oe),se=n(117),le=n.n(se),ue=n(67),de=n.n(ue),pe="iiii do LLL",me="Baby girl",he=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).renderTitle=function(e){switch(e.type){case x.Feed:return"".concat(me," drank ").concat(e.amount).concat(e.unit).concat("1"===e.amount?"s":"");case x.Nappy:return"".concat(me," did a ").concat(e.isWee?"wee":"").concat(e.isWee&&e.isPoop?" and a ":"").concat(e.isPoop?"poop":"");default:return"Unrecognised item \ud83e\udd14"}},n.renderEntryDate=function(e){if(null!=e.time)return a.createElement(a.Fragment,null,Object(D.a)(new Date(e.time),"HH:mm a "))},n.renderTypeIcon=function(e){return e.type===x.Feed?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83c\udf7c"):e.type===x.Nappy&&e.isPoop&&e.isWee?a.createElement("span",{style:{fontSize:"0.6rem",color:"initial"}},"\ud83d\udca9\ud83d\udca6"):e.type===x.Nappy&&e.isPoop?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83d\udca9"):e.type===x.Nappy&&e.isWee?a.createElement("span",{style:{fontSize:"1.5rem",color:"initial"}},"\ud83d\udca6"):a.createElement(a.Fragment,null)},n.renderSortedEntries=function(){var e=n.props,t=e.nappies,r=e.feeds,i=e.date,o=e.onChangeEntry,c=e.removeEntry,s=e.isLoading,l=[].concat(Object(U.a)(t),Object(U.a)(r));return s?a.createElement(a.Fragment,null,a.createElement(E.m,{style:{fontSize:"2rem",marginBottom:"3rem"},variant:"h2"},Object(D.a)(i,pe)),a.createElement("div",{style:{display:"flex",marginTop:"5rem"}},a.createElement(de.a,{style:{marginRight:"auto",marginLeft:"auto"}}))):0===l.length?a.createElement(a.Fragment,null,a.createElement(E.m,{style:{fontSize:"2rem",marginBottom:"3rem"},variant:"h2"},Object(D.a)(i,pe)),a.createElement(E.m,{style:{fontSize:"1.5rem"},variant:"h3"},"Nothing today")):(l.sort(function(e,t){return e.time-t.time}),a.createElement(a.Fragment,null,a.createElement(E.m,{style:{fontSize:"2rem",marginBottom:"1rem"},variant:"h2"},Object(D.a)(i,pe)),a.createElement(Z.a,null,l.map(function(e){return a.createElement(G.a,{key:e.id},a.createElement(X.a,null,n.renderTypeIcon(e)),a.createElement(te.a,{primary:n.renderTitle(e),secondary:n.renderEntryDate(e)}),a.createElement(ae.a,null,a.createElement(ie.a,{onClick:function(){return o(e)},"aria-label":"Edit"},a.createElement(le.a,null)),a.createElement(ie.a,{onClick:function(){return c(e)},"aria-label":"Delete"},a.createElement(ce.a,null))))}))))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.renderSortedEntries()}}]),t}(a.Component),fe=n(224),ye=n(5740),ge=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={unsubscriptions:[],date:new Date,isLoading:!1},n.componentWillMount=Object(R.a)(M.a.mark(function e(){var t,a,r,i,o,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.location,r=t.getDataByDate,i=t.subscribeByDate,o=I(a),c=i({startDate:Object(fe.a)(o),endDate:Object(ye.a)(o)}),n.setState({unsubscriptions:c,date:o,isLoading:!0}),e.next=6,r({startDate:Object(fe.a)(o),endDate:Object(ye.a)(o)});case 6:n.setState({isLoading:!1});case 7:case"end":return e.stop()}},e,this)})),n.componentWillReceiveProps=function(e){var t=e.location,a=I(n.props.location),r=I(t);a.getTime()!==r.getTime()&&n.handleDateChange(r)},n.handleDateChange=function(){var e=Object(R.a)(M.a.mark(function e(t){var a,r,i,o,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.unsubscriptions,r=n.props,i=r.subscribeByDate,o=r.getDataByDate,a.forEach(function(e){return e()}),c=i({startDate:Object(fe.a)(t),endDate:Object(ye.a)(t)}),n.setState({unsubscriptions:c,date:t,isLoading:!0}),e.next=7,o({startDate:Object(fe.a)(t),endDate:Object(ye.a)(t)});case 7:n.setState({isLoading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangeEntry,n=e.removeEntry,r=e.feeds,i=e.nappies,o=this.state,c=o.date,s=o.isLoading;return a.createElement(he,{isLoading:s,date:c,onChangeEntry:t,removeEntry:n,feeds:r,nappies:i})}}]),t}(a.Component),be=Object(y.a)(J()(ge)),ve=n(233),Ee=n(89),Oe=n.n(Ee),we=n(119),je=n.n(we),Ce=n(87),ke=n.n(Ce),De=n(83),Se=n.n(De),Fe=n(84),Ie=n.n(Fe),Te=n(234),xe=n(71),Ae=n(130),Ne=n.n(Ae);function Be(){var e=Object(f.a)(["\n  margin-bottom: 2rem !important;\n\n  @media (max-width: 976px) {\n    & {\n      width: 100%;\n    }\n  }\n"]);return Be=function(){return e},e}var We=Object(v.a)(E.c)(Be()),Le={amount:"",unit:A.Millilitres,note:"",time:(new Date).getTime()},Pe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Le,n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.item,r=t.updateEntry,i=t.addEntry,o=t.onFinish,c=n.state,s=c.amount,l=c.unit,u=c.note,d=c.time;if(s)return a?void(a.type===x.Feed?(r(Object(xe.a)({},a,{amount:s,unit:l,note:u,time:d})),o()):o()):(i({amount:s,unit:l,note:u,type:x.Feed,id:Ne()(),time:d}),void o());n.setState({error:"Must add an amount"})},n.handleClear=function(){n.setState(Le)},n.handleDateChange=function(e){n.setState({time:new Date(e.currentTarget.value).getTime()})},n.handleAmountChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({amount:t})},n.handleUnitChange=function(e){var t=e.currentTarget.value;switch(t){case A.Millilitres:n.setState({unit:A.Millilitres});break;case A.FluidOz:n.setState({unit:A.FluidOz});break;default:console.warn("Unrecognised unit type selected",t)}},n.handleNoteChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({note:t})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.item;e&&e.type==x.Feed&&this.setState(Object(xe.a)({},e))}},{key:"render",value:function(){var e=this.state,t=e.amount,n=e.unit,r=e.note,i=e.time,o=e.error,c=new Date(i).toISOString(),s=c.substring(0,c.length-5);return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(We,null,a.createElement(E.k,{style:{marginBottom:"1.5rem"},id:"datetime-local",label:"When",type:"datetime-local",value:s,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,required:!0}),a.createElement("div",{style:{position:"relative"}},a.createElement(E.j,{htmlFor:"feed-amount"},"Amount"),a.createElement(E.i,{style:{marginBottom:"1.5rem",width:"100%"},type:"number",value:t,id:"feed-amount",onChange:this.handleAmountChange}),null!=o&&""!=o&&a.createElement(E.f,{error:!0},o)),a.createElement(E.k,{id:"feed-unit",label:"Unit",style:{marginBottom:"1.5rem"},SelectProps:{native:!0},select:!0,value:n,onChange:this.handleUnitChange},a.createElement("option",{key:A.Millilitres,value:A.Millilitres},A.Millilitres),a.createElement("option",{key:A.FluidOz,value:A.FluidOz},A.FluidOz)),a.createElement(E.k,{id:"feed-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:r,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(E.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}}]),t}(a.Component),Me=J()(Pe);function Re(){var e=Object(f.a)(["\n  margin-bottom: 2rem !important;\n\n  @media (max-width: 976px) {\n    & {\n      width: 100%;\n    }\n  }\n"]);return Re=function(){return e},e}var Ue=Object(v.a)(E.c)(Re()),ze={isWee:!1,isPoop:!1,note:"",time:(new Date).getTime()},Ke=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=ze,n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.item,r=t.updateEntry,i=t.addEntry,o=t.onFinish,c=n.state,s=c.isWee,l=c.isPoop,u=c.note,d=c.time;if(s||l)return a?void(a.type===x.Nappy?(r(Object(xe.a)({},a,{isWee:s,isPoop:l,note:u,time:d})),o()):o()):(i({isWee:s,isPoop:l,note:u,type:x.Nappy,id:Ne()(),time:d}),void o());n.setState({error:"Baby must've done a wee or a poo"})},n.handleClear=function(){n.setState(ze)},n.handleDateChange=function(e){n.setState({time:new Date(e.currentTarget.value).getTime()})},n.handleCheckboxChange=function(e,t){var a=t.currentTarget.checked;"wee"!=e?n.setState({isPoop:a}):n.setState({isWee:a})},n.handleNoteChange=function(e){var t=e.currentTarget.value;null!=t&&n.setState({note:t})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.item;e&&e.type==x.Nappy&&this.setState(Object(xe.a)({},e))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isWee,r=t.isPoop,i=t.note,o=t.time,c=t.error,s=new Date(o).toISOString(),l=s.substring(0,s.length-5);return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement(Ue,null,a.createElement(E.k,{style:{marginBottom:"1.5rem"},id:"datetime-local",label:"When",type:"datetime-local",value:l,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,required:!0}),a.createElement(E.e,{style:{marginTop:"1.5rem",marginBottom:"1.5rem"}},a.createElement(E.g,null,"Nappy contents \ud83e\udd22"),null!=c&&""!=c&&a.createElement(E.f,{error:!0},c),a.createElement(E.d,{control:a.createElement(E.b,{checked:n,onChange:function(t){return e.handleCheckboxChange("wee",t)},id:"is-wee-input",value:"wee"}),label:"Wee"}),a.createElement(E.d,{control:a.createElement(E.b,{checked:r,onChange:function(t){return e.handleCheckboxChange("poop",t)},id:"is-poop-input",value:"poop"}),label:"Poop"})),a.createElement(E.k,{id:"nappy-note",label:"Note",style:{marginBottom:"1.5rem"},multiline:!0,fullWidth:!0,rowsMax:"4",value:i,onChange:this.handleNoteChange})),a.createElement("div",null,a.createElement(E.a,{type:"submit",variant:"contained",color:"secondary"},"Save")))}}]),t}(a.Component),He=J()(Ke);function Ve(){var e=Object(f.a)(["\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n"]);return Ve=function(){return e},e}function _e(){var e=Object(f.a)(["\n  padding: 2rem;\n"]);return _e=function(){return e},e}var qe=v.a.div(_e()),Je=v.a.div(Ve()),Ye=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedInputType:x.Feed,isEditingItem:!1},n.handleTypeChange=function(e,t){switch(Object(ve.a)(e),t){case x.Feed:n.setState({selectedInputType:x.Feed});break;case x.Nappy:n.setState({selectedInputType:x.Nappy});break;default:console.warn("Unrecognised update type selection",t),n.setState({selectedInputType:x.Feed})}},n.handleCloseClick=function(){n.props.onFinish()},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.item;e&&this.setState({isEditingItem:!0,selectedInputType:e.type})}},{key:"renderInput",value:function(){switch(this.state.selectedInputType){case x.Feed:return a.createElement(Me,this.props);case x.Nappy:return a.createElement(He,this.props)}}},{key:"render",value:function(){var e=this.state,t=e.isEditingItem,n=e.selectedInputType;return a.createElement(qe,null,a.createElement(Je,null,a.createElement(E.m,{variant:"h1",style:{fontSize:"2rem",marginBottom:"2.2rem"}},t?"Edit":"Add"," an entry"),a.createElement(E.h,{style:{position:"absolute",top:"0.8rem",right:"0.8rem"},onClick:this.handleCloseClick,"aria-label":"Close"},a.createElement(Te.a,null))),a.createElement(Se.a,{style:{marginBottom:"2rem"}},a.createElement(Ie.a,null,"Type"),a.createElement(je.a,{"aria-label":"Type",name:"type",value:n,onChange:this.handleTypeChange},a.createElement(ke.a,{value:x.Feed,control:a.createElement(Oe.a,null),label:"Feed",disabled:t}),a.createElement(ke.a,{value:x.Nappy,control:a.createElement(Oe.a,null),label:"Nappy",disabled:t}))),this.renderInput())}}]),t}(a.Component),Ze=n(235),$e=n.n(Ze),Ge=n(57),Qe=n.n(Ge),Xe=n(120),et=n.n(Xe),tt=n(121),nt=n.n(tt),at=n(122),rt=n.n(at);function it(){var e=Object(f.a)(["\n  padding-right: 24px;\n  padding-left: 24px;\n\n  @media (max-width: 1280px) {\n    padding-right: 18px;\n    padding-left: 18px;\n  }\n\n  @media (max-width: 976px) {\n    padding-right: 12px;\n    padding-left: 12px;\n  }\n"]);return it=function(){return e},e}function ot(e){return r.a.createElement(et.a,Object.assign({direction:"up"},e))}var ct=v.a.div(it()),st=Object(D.a)(new Date,"yyyy-MM-dd"),lt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isInitialisingFirebase:!1,isInputtingEntry:!1,isSignedIn:!1,entryBeingEdited:void 0},n.signInConfig={},n.unregisterAuthObserver=null,n.handleAddEntry=function(){n.setState({isInputtingEntry:!0,entryBeingEdited:void 0})},n.handleChangeEntry=function(e){n.setState({entryBeingEdited:e,isInputtingEntry:!0})},n.handleFinishAdding=function(){n.setState({isInputtingEntry:!1})},n.handleFinishEditing=function(){n.setState({isInputtingEntry:!1,entryBeingEdited:void 0})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=Object(R.a)(M.a.mark(function e(){var t,n,a,r=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("beforeinstallprompt",function(e){console.log(e)}),t=this.props,n=t.history,a=t.location,null==F.a.parse(a.search).date&&n.replace("?date=".concat(st)),this.signInConfig={signInFlow:"popup",signInOptions:[K.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},this.setState({isInitialisingFirebase:!0}),e.next=8,_.initialise();case 8:null==V.currentUser&&this.setState({isSignedIn:!1}),this.unregisterAuthObserver=V.onAuthStateChanged(function(e){return r.setState({isSignedIn:!!e,isInitialisingFirebase:!1})});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){null!=this.unregisterAuthObserver&&this.unregisterAuthObserver()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInitialisingFirebase,a=t.isInputtingEntry,i=t.entryBeingEdited,o=t.isSignedIn;return n?r.a.createElement("div",{style:{display:"flex",marginTop:"5rem"}},r.a.createElement(de.a,{style:{marginRight:"auto",marginLeft:"auto"}})):o?r.a.createElement(ct,null,r.a.createElement(Qe.a,{fullScreen:!0,TransitionComponent:ot,open:a&&!i,onClose:function(){return e.setState({isInputtingEntry:!1})}},r.a.createElement(Ye,{onFinish:this.handleFinishAdding})),r.a.createElement(Qe.a,{fullScreen:!0,TransitionComponent:ot,open:a&&!!i,onClose:function(){return e.setState({isInputtingEntry:!1})}},r.a.createElement(Ye,{onFinish:this.handleFinishEditing,item:i})),r.a.createElement(be,{onChangeEntry:this.handleChangeEntry}),r.a.createElement(nt.a,{style:{position:"fixed",right:"1.5rem",bottom:"1.5rem"},onClick:this.handleAddEntry,color:"secondary","aria-label":"Add",classes:{}},r.a.createElement(rt.a,null))):r.a.createElement($e.a,{uiConfig:this.signInConfig,firebaseAuth:V})}}]),t}(r.a.Component),ut=Object(y.a)(lt),dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var mt=n(22),ht=n(5741),ft=n.n(ht),yt=n(5742),gt=n.n(yt),bt=n(123),vt=n.n(bt),Et=n(5743),Ot=Object(mt.createMuiTheme)({palette:{primary:{light:ft.a[300],main:ft.a[500],dark:ft.a[700]},secondary:{light:gt.a[300],main:gt.a[500],dark:gt.a[700]}},typography:{useNextVariants:!0}}),wt=function(){return r.a.createElement("h1",null,"Oops, this page couldn't be found")};o.a.render(r.a.createElement(l.a,{basename:"babba-tracker"},r.a.createElement(function(){return r.a.createElement(j.b,{utils:Et.a},r.a.createElement(mt.MuiThemeProvider,{theme:Ot},r.a.createElement(vt.a,null),r.a.createElement(L,null),r.a.createElement(c.a,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(ut,null)),r.a.createElement(s.a,{path:"*",component:wt}))))},null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/babba-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/babba-tracker","/service-worker.js");dt?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):pt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):pt(t,e)})}}()}},[[5510,2,1]]]);
//# sourceMappingURL=main.86da840d.chunk.js.map